# PidFile: file in which the server records its pid
#PidFile ${APACHE_PID_FILE}
PidFile /var/run/apache2/apache2.pid

# Timeout: number of seconds before receives and sends time out.
Timeout 300

# KeepAlive: allow persistent connections (more than one request per connection).
KeepAlive On

# MaxKeepAliveRequests: max number of requests during a persistent connection.
MaxKeepAliveRequests 100

# KeepAliveTimeout: seconds to wait for next request on same connection.
KeepAliveTimeout 5

# Lower permissions than root
User www-data
Group www-data

# ErrorLog: location of the error log file.
#ErrorLog ${APACHE_LOG_DIR}/error.log
ErrorLog /var/log/apache2/error.log

# LogLevel: control number of messages logged to ErrorLog.
LogLevel warn

#Uncomment this section to enable ssl as well-->we can copy these modules into this file so everything is in one config file
#LoadModule socache_shmcb_module /usr/lib/apache2/modules/mod_socache_shmcb.so
#LoadModule ssl_module /usr/lib/apache2/modules/mod_ssl.so
#<IfModule mod_ssl.c>
#        SSLRandomSeed startup builtin
#        SSLRandomSeed startup file:/dev/urandom 512
#        SSLRandomSeed connect builtin
#        SSLRandomSeed connect file:/dev/urandom 512
#        AddType application/x-x509-ca-cert .crt
#        AddType application/x-pkcs7-crl .crl
#        SSLPassPhraseDialog exec:/usr/share/apache2/ask-for-passphrase
#        SSLSessionCache                 shmcb:/var/run/apache2/ssl_scache(512000)
#        SSLSessionCacheTimeout  300
#        SSLCipherSuite HIGH:MEDIUM:!aNULL:!MD5
#        SSLProtocol all
#</IfModule>
LoadModule mime_module /usr/lib/apache2/modules/mod_mime.so
<IfModule mod_mime.c>
        TypesConfig /etc/mime.types
        AddType application/x-compress .Z
        AddType application/x-gzip .gz .tgz
        AddType application/x-bzip2 .bz2
        AddLanguage am .amh
        AddLanguage ar .ara
        AddLanguage be .be
        AddLanguage bg .bg
        AddLanguage bn .bn
        AddLanguage br .br
        AddLanguage bs .bs
        AddLanguage ca .ca
        AddLanguage cs .cz .cs
        AddLanguage cy .cy
        AddLanguage da .dk
        AddLanguage de .de
        AddLanguage dz .dz
        AddLanguage el .el
        AddLanguage en .en
        AddLanguage eo .eo
        RemoveType  es
        AddLanguage es .es
        AddLanguage et .et
        AddLanguage eu .eu
        AddLanguage fa .fa
        AddLanguage fi .fi
        AddLanguage fr .fr
        AddLanguage ga .ga
        AddLanguage gl .glg
        AddLanguage gu .gu
        AddLanguage he .he
        AddLanguage hi .hi
        AddLanguage hr .hr
        AddLanguage hu .hu
        AddLanguage hy .hy
        AddLanguage id .id
        AddLanguage is .is
        AddLanguage it .it
        AddLanguage ja .ja
        AddLanguage ka .ka
        AddLanguage kk .kk
        AddLanguage km .km
        AddLanguage kn .kn
        AddLanguage ko .ko
        AddLanguage ku .ku
        AddLanguage lo .lo
        AddLanguage lt .lt
        AddLanguage ltz .ltz
        AddLanguage lv .lv
        AddLanguage mg .mg
        AddLanguage mk .mk
        AddLanguage ml .ml
        AddLanguage mr .mr
        AddLanguage ms .msa
        AddLanguage nb .nob
        AddLanguage ne .ne
        AddLanguage nl .nl
        AddLanguage nn .nn
        AddLanguage no .no
        AddLanguage pa .pa
        AddLanguage pl .po
        AddLanguage pt-BR .pt-br
        AddLanguage pt .pt
        AddLanguage ro .ro
        AddLanguage ru .ru
        AddLanguage sa .sa
        AddLanguage se .se
        AddLanguage si .si
        AddLanguage sk .sk
        AddLanguage sl .sl
        AddLanguage sq .sq
        AddLanguage sr .sr
        AddLanguage sv .sv
        AddLanguage ta .ta
        AddLanguage te .te
        AddLanguage th .th
        AddLanguage tl .tl
        RemoveType  tr
        AddLanguage tr .tr
        AddLanguage uk .uk
        AddLanguage ur .ur
        AddLanguage vi .vi
        AddLanguage wo .wo
        AddLanguage xh .xh
        AddLanguage zh-CN .zh-cn
        AddLanguage zh-TW .zh-tw
        AddCharset us-ascii     .ascii .us-ascii
        AddCharset ISO-8859-1  .iso8859-1  .latin1
        AddCharset ISO-8859-2  .iso8859-2  .latin2 .cen
        AddCharset ISO-8859-3  .iso8859-3  .latin3
        AddCharset ISO-8859-4  .iso8859-4  .latin4
        AddCharset ISO-8859-5  .iso8859-5  .cyr .iso-ru
        AddCharset ISO-8859-6  .iso8859-6  .arb .arabic
        AddCharset ISO-8859-7  .iso8859-7  .grk .greek
        AddCharset ISO-8859-8  .iso8859-8  .heb .hebrew
        AddCharset ISO-8859-9  .iso8859-9  .latin5 .trk
        AddCharset ISO-8859-10  .iso8859-10  .latin6
        AddCharset ISO-8859-13  .iso8859-13
        AddCharset ISO-8859-14  .iso8859-14  .latin8
        AddCharset ISO-8859-15  .iso8859-15  .latin9
        AddCharset ISO-8859-16  .iso8859-16  .latin10
        AddCharset ISO-2022-JP .iso2022-jp .jis
        AddCharset ISO-2022-KR .iso2022-kr .kis
        AddCharset ISO-2022-CN .iso2022-cn .cis
        AddCharset Big5         .Big5      .big5 .b5
        AddCharset cn-Big5       .cn-big5
        AddCharset WINDOWS-1251 .cp-1251   .win-1251
        AddCharset CP866           .cp866
        AddCharset KOI8   .koi8
        AddCharset KOI8-E         .koi8-e
        AddCharset KOI8-r         .koi8-r .koi8-ru
        AddCharset KOI8-U         .koi8-u
        AddCharset KOI8-ru       .koi8-uk .ua
        AddCharset ISO-10646-UCS-2 .ucs2
        AddCharset ISO-10646-UCS-4 .ucs4
        AddCharset UTF-7           .utf7
        AddCharset UTF-8           .utf8
        AddCharset UTF-16         .utf16
        AddCharset UTF-16BE     .utf16be
        AddCharset UTF-16LE     .utf16le
        AddCharset UTF-32         .utf32
        AddCharset UTF-32BE     .utf32be
        AddCharset UTF-32LE     .utf32le
        AddCharset euc-cn         .euc-cn
        AddCharset euc-gb         .euc-gb
        AddCharset euc-jp         .euc-jp
        AddCharset euc-kr         .euc-kr
        AddCharset EUC-TW         .euc-tw
        AddCharset gb2312         .gb2312 .gb
        AddCharset iso-10646-ucs-2 .ucs-2 .iso-10646-ucs-2
        AddCharset iso-10646-ucs-4 .ucs-4 .iso-10646-ucs-4
        AddCharset shift_jis   .shift_jis .sjis
        AddCharset BRF           .brf
        AddHandler type-map var
        AddType text/html .shtml
        AddOutputFilter INCLUDES .shtml
        AddHandler cgi-script .cgi
</IfModule>
#SSLEngine on
#SSLCertificateFile      /etc/ssl/certs/ssl-cert-snakeoil.pem
#SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key

# Include mod_dir: controls DirectoryIndex directive which sets index.html
LoadModule dir_module /usr/lib/apache2/modules/mod_dir.so
<IfModule mod_dir.c>
        DirectoryIndex index.html index.cgi index.pl index.php index.xhtml index.htm
</IfModule>

# http://httpd.apache.org/docs/2.2/mpm.html states default MPM for unix is prefork
LoadModule mpm_prefork_module /usr/lib/apache2/modules/mod_mpm_prefork.so
<IfModule mpm_prefork_module>
        StartServers              5
        MinSpareServers           5
        MaxSpareServers          10
        MaxRequestWorkers       150
        MaxConnectionsPerChild    0
</IfModule>

# authz_core_module defines Require directive which tests whether an authenticated user is authorized
LoadModule authz_core_module /usr/lib/apache2/modules/mod_authz_core.so

# Include list of ports to listen on
Listen 10.0.0.1:80

# Allow access only to /usr/share (web apps) and /var/www (directories served)
# If serving from different directory, must list here
#<Directory />
#	Options FollowSymLinks
#	AllowOverride None
#	Require all denied
#</Directory>

#<Directory /var/www/>
#	Options Indexes FollowSymLinks
#	AllowOverride None
#	Require all granted
#</Directory>

# Prevent .htaccess/.htpasswd files from being viewed by clients
#<FilesMatch "^\.ht">
#	Require all denied
#</FilesMatch>

LoadModule cgi_module /usr/lib/apache2/modules/mod_cgi.so
LoadModule alias_module /usr/lib/apache2/modules/mod_alias.so
#ScriptAlias / /home/ravi/mahimahi/apachetest/test.cgi
ScriptAlias / /usr/local/bin/replayserver.cgi
#<Directory "/home/ravi/mahimahi/apachetest/">
<Directory "/usr/local/bin/">
AllowOverride None
Options +ExecCGI
Require all granted
</Directory>
LoadModule rewrite_module /usr/lib/apache2/modules/mod_rewrite.so
RewriteEngine On
#RewriteRule ^(.*)$ /home/ravi/mahimahi/apachetest/test.cgi
RewriteRule ^(.*)$ /usr/local/bin/replayserver.cgi

# Define format nicknames for use with a CustomLog directive.
# Use %O (actual bytes sent including headers) instead of %b (size of requested file),
# because the latter makes it impossible to detect partial
#CustomLog ${APACHE_LOG_FILE} common
CustomLog /var/log/apache2/access.log common
LogFormat "%h %l %u %t \"%r\" %>s %O" common
